<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard | Skin Cancer Detection</title>
<!-- TailwindCSS CDN -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- Flowbite for components -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.7.0/flowbite.min.css" rel="stylesheet" />
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- AOS for animations -->
<link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
</head>
<body class="bg-gray-100 font-sans">

<!-- Sidebar -->
<aside class="w-64 h-screen bg-gradient-to-b from-blue-800 to-blue-900 text-white flex flex-col fixed shadow-xl">
  <!-- Logo / Profile -->
  <div class="p-6 flex flex-col items-center border-b border-blue-700">
    <div class="w-20 h-20 rounded-full bg-white text-blue-900 font-bold flex items-center justify-center text-2xl shadow-lg">SC</div>
    <h2 class="mt-3 font-bold text-xl">Skin Cancer</h2>
    <p class="text-sm opacity-80 mt-1">Dashboard</p>
  </div>

  <!-- Menu -->
  <nav class="flex-1 p-4 space-y-2">
    <a href="home.html" class="flex items-center px-4 py-2 rounded-lg transition hover:bg-blue-700 hover:scale-105">
      <span class="material-icons mr-3"></span> Home
    </a>
    <a href="#" class="flex items-center px-4 py-2 rounded-lg transition hover:bg-blue-700 hover:scale-105">
      <span class="material-icons mr-3"></span> Upload
    </a>
    <a href="#" class="flex items-center px-4 py-2 rounded-lg transition hover:bg-blue-700 hover:scale-105">
      <span class="material-icons mr-3"></span> History
    </a>
    <a href="#" class="flex items-center px-4 py-2 rounded-lg transition hover:bg-blue-700 hover:scale-105">
      <span class="material-icons mr-3"></span> Profile
    </a>
    <a href="#" id="logout" class="flex items-center px-4 py-2 mt-4 bg-red-600 rounded-lg hover:bg-red-700 transition hover:scale-105">
      <span class="material-icons mr-3"></span> Logout
    </a>
  </nav>

  <!-- Footer Branding / Info -->
  <div class="p-4 border-t border-blue-700 text-center text-sm opacity-80">
    &copy; 2025 Skin Cancer Detection And Classification
  </div>
</aside>

  <!-- Main Content -->
  <main class="flex-1 ml-64 p-8">
    <div class="bg-gradient-to-r from-blue-700 to-blue-500 text-white rounded-xl p-8 mb-6 shadow-lg" data-aos="fade-up">
      <h1 class="text-3xl font-bold">Welcome, <span id="user-name">User</span>!</h1>
      <p class="mt-2 opacity-90">Monitor your scans, predictions, and history in one interactive dashboard.</p>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      <div class="bg-white rounded-xl p-6 shadow hover:shadow-lg transition" data-aos="fade-up" data-aos-delay="100">
        <h3 class="text-blue-900 font-bold text-xl mb-2">Total Users</h3>
        <p id="total-users" class="text-gray-700 text-lg">0</p>
      </div>
      <div class="bg-white rounded-xl p-6 shadow hover:shadow-lg transition" data-aos="fade-up" data-aos-delay="200">
        <h3 class="text-blue-900 font-bold text-xl mb-2">Predictions Made</h3>
        <p id="total-predictions" class="text-gray-700 text-lg">0</p>
      </div>
      <div class="bg-white rounded-xl p-6 shadow hover:shadow-lg transition" data-aos="fade-up" data-aos-delay="300">
        <h3 class="text-blue-900 font-bold text-xl mb-2">Positive Cases</h3>
        <p id="positive-cases" class="text-gray-700 text-lg">0</p>
      </div>
    </div>

    <!-- Charts -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div class="bg-white p-6 rounded-xl shadow" data-aos="fade-right">
        <h3 class="font-bold text-blue-900 mb-4">Scans by Type</h3>
        <canvas id="chart1" class="w-full"></canvas>
      </div>
      <div class="bg-white p-6 rounded-xl shadow" data-aos="fade-left">
        <h3 class="font-bold text-blue-900 mb-4">Positive Cases Over Time</h3>
        <canvas id="chart2" class="w-full"></canvas>
      </div>
    </div>

    <!-- Upload Section -->
    <div class="bg-white rounded-xl p-6 shadow mb-6" data-aos="fade-up">
      <h3 class="text-blue-900 font-bold mb-4">Upload Skin Image</h3>
      <input type="file" id="image-upload" accept="image/*" class="w-full p-3 border rounded mb-4" />
      <button id="analyze-btn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded font-bold transition">Analyze</button>
    </div>

    <!-- Recent Predictions Table -->
    <div class="bg-white rounded-xl p-6 shadow mb-6" data-aos="fade-up">
      <h3 class="text-blue-900 font-bold mb-4">Recent Predictions</h3>
      <div class="overflow-x-auto">
        <table class="w-full text-left">
          <thead>
            <tr class="bg-blue-900 text-white">
              <th class="px-4 py-2">User</th>
              <th class="px-4 py-2">Date</th>
              <th class="px-4 py-2">Result</th>
            </tr>
          </thead>
          <tbody id="recent-table"></tbody>
        </table>
      </div>
    </div>

  </main>
</div>

<!-- Footer -->
<footer class="text-center py-6 bg-blue-900 text-white rounded-t-xl mt-6">
  &copy; 2025 Skin Cancer Detection • Built for Academic Demo • <a href="#" class="underline">Contact</a>
</footer>

<script>
// Initialize AOS
AOS.init({duration:700, once:true});

// User info
const logoutBtn = document.getElementById("logout");
const analyzeBtn = document.getElementById("analyze-btn");
const imageUpload = document.getElementById("image-upload");
const userName = document.getElementById("user-name");
const currentUser = JSON.parse(localStorage.getItem("currentUser")) || {name:'User', email:''};
userName.innerText = currentUser.name || "User";
if(!currentUser.email) window.location.href = "login.html";
logoutBtn.addEventListener("click",()=>{localStorage.removeItem("currentUser");window.location.href="login.html";});

// Load predictions
function loadRecentPredictions(){
  const predictions = JSON.parse(localStorage.getItem("predictions")||"[]");
  const userPredictions = predictions.filter(p=>p.userEmail===currentUser.email);
  const tbody = document.getElementById("recent-table");
  tbody.innerHTML="";
  userPredictions.forEach(p=>{
    tbody.innerHTML+=`<tr class="border-b"><td class="px-4 py-2">${currentUser.name}</td><td class="px-4 py-2">${p.date}</td><td class="px-4 py-2">${p.result}</td></tr>`;
  });
  document.getElementById("total-users").innerText = JSON.parse(localStorage.getItem("users")||"[]").length;
  document.getElementById("total-predictions").innerText = predictions.length;
  document.getElementById("positive-cases").innerText = predictions.filter(p=>p.result==="Malignant").length;
}
loadRecentPredictions();

// Analyze button
analyzeBtn.addEventListener("click", () => {
  const file = imageUpload.files[0];
  if (!file) { 
    alert("Please select an image"); 
    return; 
  }

  const classes = ["SCC", "Melanoma", "BCC"]; // Only 3 classes
  const randomIndex = Math.floor(Math.random() * classes.length);
  const result = classes[randomIndex];

  // Store in localStorage
  const predictions = JSON.parse(localStorage.getItem("predictions") || "[]");
  predictions.push({
    userEmail: currentUser.email,
    result: result,
    date: new Date().toLocaleString()
  });
  localStorage.setItem("predictions", JSON.stringify(predictions));

  // Refresh table & stats
  loadRecentPredictions();

  // Show result
  alert("Analysis Complete: " + result);
});

// Charts
const ctx1=document.getElementById('chart1').getContext('2d');
new Chart(ctx1,{type:'bar',data:{labels:['Melanoma','Benign','Nevus','Other'],datasets:[{label:'Scans',data:[32,58,24,12],backgroundColor:'#10B981'}]},options:{responsive:true,plugins:{legend:{display:false}}}});
const ctx2=document.getElementById('chart2').getContext('2d');
new Chart(ctx2,{type:'line',data:{labels:['Jan','Feb','Mar','Apr','May'],datasets:[{label:'Positive Cases',data:[10,20,15,25,30],borderColor:'#1E3A8A',backgroundColor:'rgba(30,58,138,0.1)',tension:0.3}]}});
</script>

</body>
</html>


